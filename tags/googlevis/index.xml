<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Googlevis on HSW Academic</title>
    <link>/tags/googlevis/</link>
    <description>Recent content in Googlevis on HSW Academic</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2017 Homer White</copyright>
    <lastBuildDate>Wed, 03 Sep 2014 20:30:00 +0000</lastBuildDate>
    <atom:link href="/tags/googlevis/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Google Charts in R Markdown</title>
      <link>/post/2014-09-03-google-charts/</link>
      <pubDate>Wed, 03 Sep 2014 20:30:00 +0000</pubDate>
      
      <guid>/post/2014-09-03-google-charts/</guid>
      <description>&lt;div id=&#34;introduction&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;An excellent little post (&lt;a href=&#34;http://lamages.blogspot.com/2014/09/zoom-zoom-googlevis.html&#34;&gt;Zoom, zoom googleVis&lt;/a&gt;) showed up recently on &lt;a href=&#34;http://www.r-bloggers.com/&#34;&gt;R-Bloggers&lt;/a&gt;. The author Markus Gesmann is the maintainer of the &lt;code&gt;googleVis&lt;/code&gt; package that links R to the &lt;a href=&#34;https://developers.google.com/chart/interactive/docs/gallery&#34;&gt;Google Charts API&lt;/a&gt;. My first thought was: could I embed charts like those in R Markdown documents that could knit to ioslides or other formats suitable for use in my elementary statistics classes?&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;A quick look at the documentation showed that it’s very easy indeed to do this sort of thing.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;extrapolation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Extrapolation&lt;/h2&gt;
&lt;p&gt;Suppose, for example, that you want to illustrate to students the risks associated with extrapolation. You begin by reminding them of the experience they had back in high school with their graphing calculators, when they zoomed in on a curve: zoom in close enough, and it looks like a straight line.&lt;/p&gt;
&lt;p&gt;Then you point out that for the most part we live our lives from a “zoomed-in” perspective, at least where data is concerned. In situations where we are interested in a pair of numerical measurements on individuals, we usually possess &lt;span class=&#34;math inline&#34;&gt;\(y\)&lt;/span&gt;-values for only a fairly narrow range of &lt;span class=&#34;math inline&#34;&gt;\(x\)&lt;/span&gt;-values. Hence it is likely that a scatter plot we make from our “zoomed-in” data will show a roughly linear relationship, even though on a global scale the “real” relationship probably is some kind of a curve.&lt;/p&gt;
&lt;p&gt;The app below (a slight modification of the example in Gesmann’s post) makes the point in a flash. Click and drag to establish a zoom region, right-click to reset:&lt;/p&gt;
&lt;!-- ScatterChart generated in R 3.4.0 by googleVis 0.6.2 package --&gt;
&lt;!-- Sat May 27 22:53:45 2017 --&gt;
&lt;!-- jsHeader --&gt;
&lt;script type=&#34;text/javascript&#34;&gt;
 
// jsData 
function gvisDataZoomZoom () {
var data = new google.visualization.DataTable();
var datajson =
[
 [
0,
2537.697212
],
[
0.5,
2480.404837
],
[
1,
2291.197683
],
[
1.5,
2239.20941
],
[
2,
2024.346568
],
[
2.5,
2328.30735
],
[
3,
2302.912102
],
[
3.5,
2139.312225
],
[
4,
2291.913135
],
[
4.5,
2081.986679
],
[
5,
1939.687718
],
[
5.5,
2071.175918
],
[
6,
2055.637296
],
[
6.5,
1855.09161
],
[
7,
1836.673977
],
[
7.5,
1986.254312
],
[
8,
1934.399588
],
[
8.5,
1418.373539
],
[
9,
1452.102505
],
[
9.5,
1646.080349
],
[
10,
1817.436525
],
[
10.5,
1670.068265
],
[
11,
1552.822032
],
[
11.5,
1474.935244
],
[
12,
1527.426874
],
[
12.5,
1426.125064
],
[
13,
1498.784138
],
[
13.5,
1425.921831
],
[
14,
1281.256681
],
[
14.5,
1271.293199
],
[
15,
1143.749534
],
[
15.5,
1115.879783
],
[
16,
1265.534507
],
[
16.5,
1365.787371
],
[
17,
1127.811847
],
[
17.5,
1085.312767
],
[
18,
995.4401713
],
[
18.5,
999.8514718
],
[
19,
904.9701396
],
[
19.5,
974.9688372
],
[
20,
990.8501134
],
[
20.5,
819.7440402
],
[
21,
810.8995988
],
[
21.5,
739.6464023
],
[
22,
665.9922973
],
[
22.5,
781.5574713
],
[
23,
691.9288703
],
[
23.5,
704.4679564
],
[
24,
742.0044122
],
[
24.5,
699.1293635
],
[
25,
606.1210083
],
[
25.5,
660.3859521
],
[
26,
508.6239947
],
[
26.5,
599.8550241
],
[
27,
540.8753228
],
[
27.5,
518.3726283
],
[
28,
465.3953206
],
[
28.5,
329.4228811
],
[
29,
384.3077049
],
[
29.5,
478.1333933
],
[
30,
590.9037231
],
[
30.5,
405.3257043
],
[
31,
201.1684941
],
[
31.5,
662.4131747
],
[
32,
419.5235375
],
[
32.5,
343.1144616
],
[
33,
381.2919068
],
[
33.5,
251.6978654
],
[
34,
265.2966701
],
[
34.5,
257.076218
],
[
35,
304.5839125
],
[
35.5,
374.8505607
],
[
36,
24.30756836
],
[
36.5,
150.4156894
],
[
37,
78.5860028
],
[
37.5,
85.85072033
],
[
38,
-33.80994618
],
[
38.5,
60.02448374
],
[
39,
125.615421
],
[
39.5,
134.6158021
],
[
40,
162.8331306
],
[
40.5,
87.78614177
],
[
41,
312.4153309
],
[
41.5,
89.97102573
],
[
42,
-38.44147667
],
[
42.5,
283.7181301
],
[
43,
-139.9056665
],
[
43.5,
151.6451601
],
[
44,
220.6167027
],
[
44.5,
82.35326735
],
[
45,
-128.2962108
],
[
45.5,
-173.6864969
],
[
46,
64.69165381
],
[
46.5,
136.7736691
],
[
47,
-12.72734263
],
[
47.5,
-71.70931145
],
[
48,
38.88744997
],
[
48.5,
70.422425
],
[
49,
-52.14613874
],
[
49.5,
-67.48934215
],
[
50,
-172.8783941
],
[
50.5,
-98.87609916
],
[
51,
-57.55055617
],
[
51.5,
40.6021748
],
[
52,
78.66649197
],
[
52.5,
-86.59209118
],
[
53,
-24.81762967
],
[
53.5,
166.7614015
],
[
54,
42.65088778
],
[
54.5,
50.20339324
],
[
55,
-7.280201955
],
[
55.5,
173.7847433
],
[
56,
136.6527204
],
[
56.5,
-129.6913636
],
[
57,
78.89204617
],
[
57.5,
-26.2225636
],
[
58,
-55.95898328
],
[
58.5,
-55.38871173
],
[
59,
68.68219333
],
[
59.5,
306.8442199
],
[
60,
68.77170251
],
[
60.5,
146.9939225
],
[
61,
247.9439261
],
[
61.5,
-94.23538391
],
[
62,
15.01500904
],
[
62.5,
175.0385938
],
[
63,
244.1642855
],
[
63.5,
360.7181336
],
[
64,
346.8271736
],
[
64.5,
114.9338291
],
[
65,
235.342274
],
[
65.5,
179.6939502
],
[
66,
246.2399374
],
[
66.5,
259.9051893
],
[
67,
184.5320483
],
[
67.5,
298.762966
],
[
68,
500.0135333
],
[
68.5,
199.0380413
],
[
69,
627.2201028
],
[
69.5,
251.1308468
],
[
70,
401.5101774
],
[
70.5,
416.2819428
],
[
71,
660.1440323
],
[
71.5,
264.606245
],
[
72,
530.3665665
],
[
72.5,
480.0287843
],
[
73,
415.4285494
],
[
73.5,
573.3799481
],
[
74,
585.9427928
],
[
74.5,
294.5816348
],
[
75,
590.2863346
],
[
75.5,
455.5873842
],
[
76,
654.3923354
],
[
76.5,
557.3303521
],
[
77,
763.5434061
],
[
77.5,
775.0702394
],
[
78,
671.2147217
],
[
78.5,
817.2950343
],
[
79,
772.7300908
],
[
79.5,
935.0553817
],
[
80,
961.0364487
],
[
80.5,
878.9843067
],
[
81,
1036.440589
],
[
81.5,
1011.060497
],
[
82,
831.1714369
],
[
82.5,
1179.832136
],
[
83,
1121.827731
],
[
83.5,
1036.758551
],
[
84,
966.4311784
],
[
84.5,
1274.919241
],
[
85,
1349.402511
],
[
85.5,
1283.875996
],
[
86,
1219.930646
],
[
86.5,
1409.472096
],
[
87,
1435.155675
],
[
87.5,
1246.876663
],
[
88,
1224.965309
],
[
88.5,
1364.574604
],
[
89,
1626.000513
],
[
89.5,
1559.679692
],
[
90,
1572.398767
],
[
90.5,
1725.102129
],
[
91,
1576.106534
],
[
91.5,
1548.891366
],
[
92,
2005.413909
],
[
92.5,
1786.685823
],
[
93,
1941.678696
],
[
93.5,
1820.903637
],
[
94,
1806.025829
],
[
94.5,
2068.67964
],
[
95,
2145.064152
],
[
95.5,
1953.216022
],
[
96,
2192.147189
],
[
96.5,
2249.259024
],
[
97,
2136.275729
],
[
97.5,
2318.912073
],
[
98,
2194.855727
],
[
98.5,
2300.640547
],
[
99,
2402.693396
],
[
99.5,
2516.349069
],
[
100,
2427.046688
] 
];
data.addColumn(&#39;number&#39;,&#39;x&#39;);
data.addColumn(&#39;number&#39;,&#39;y&#39;);
data.addRows(datajson);
return(data);
}
 
// jsDrawChart
function drawChartZoomZoom() {
var data = gvisDataZoomZoom();
var options = {};
options[&#34;allowHtml&#34;] = true;
options[&#34;explorer&#34;] = {actions: [&#39;dragToZoom&#39;,
                     &#39;rightClickToReset&#39;],
                     maxZoomIn:0.05};
options[&#34;chartArea&#34;] = {width:&#39;85%&#39;,height:&#39;80%&#39;};
options[&#34;hAxis&#34;] = {title: &#39;Explanatory x&#39;,
                     titleTextStyle: {color: &#39;#000000&#39;}};
options[&#34;vAxis&#34;] = {title: &#39;Response y&#39;,
                     titleTextStyle: {color: &#39;#000000&#39;}};
options[&#34;title&#34;] = &#34;Curvilinear Relationship&#34;;
options[&#34;width&#34;] = 550;
options[&#34;height&#34;] = 500;
options[&#34;legend&#34;] = &#34;none&#34;;

    var chart = new google.visualization.ScatterChart(
    document.getElementById(&#39;ZoomZoom&#39;)
    );
    chart.draw(data,options);
    

}
  
 
// jsDisplayChart
(function() {
var pkgs = window.__gvisPackages = window.__gvisPackages || [];
var callbacks = window.__gvisCallbacks = window.__gvisCallbacks || [];
var chartid = &#34;corechart&#34;;
  
// Manually see if chartid is in pkgs (not all browsers support Array.indexOf)
var i, newPackage = true;
for (i = 0; newPackage &amp;&amp; i &lt; pkgs.length; i++) {
if (pkgs[i] === chartid)
newPackage = false;
}
if (newPackage)
  pkgs.push(chartid);
  
// Add the drawChart function to the global list of callbacks
callbacks.push(drawChartZoomZoom);
})();
function displayChartZoomZoom() {
  var pkgs = window.__gvisPackages = window.__gvisPackages || [];
  var callbacks = window.__gvisCallbacks = window.__gvisCallbacks || [];
  window.clearTimeout(window.__gvisLoad);
  // The timeout is set to 100 because otherwise the container div we are
  // targeting might not be part of the document yet
  window.__gvisLoad = setTimeout(function() {
  var pkgCount = pkgs.length;
  google.load(&#34;visualization&#34;, &#34;1&#34;, { packages:pkgs, callback: function() {
  if (pkgCount != pkgs.length) {
  // Race condition where another setTimeout call snuck in after us; if
  // that call added a package, we must not shift its callback
  return;
}
while (callbacks.length &gt; 0)
callbacks.shift()();
} });
}, 100);
}
 
// jsFooter
&lt;/script&gt;
&lt;!-- jsChart --&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://www.google.com/jsapi?callback=displayChartZoomZoom&#34;&gt;&lt;/script&gt;
&lt;!-- divChart --&gt;
&lt;div id=&#34;ZoomZoom&#34; style=&#34;width: 550; height: 500;&#34;&gt;

&lt;/div&gt;
&lt;p&gt;All we needed was the following code (be sure to add the chunk option &lt;code&gt;results=&#39;asis&#39;&lt;/code&gt;):&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(2020)
x &amp;lt;- seq(0,100,by=0.5)
y &amp;lt;- (50-x)^2+rnorm(length(x),sd=100)

curvy &amp;lt;- data.frame(x,y)


gvScat &amp;lt;- gvisScatterChart(curvy,
                   options=list(
                     explorer=&amp;quot;{actions: [&amp;#39;dragToZoom&amp;#39;,
                     &amp;#39;rightClickToReset&amp;#39;],
                     maxZoomIn:0.05}&amp;quot;,
                     chartArea=&amp;quot;{width:&amp;#39;85%&amp;#39;,height:&amp;#39;80%&amp;#39;}&amp;quot;,
                     hAxis=&amp;quot;{title: &amp;#39;Explanatory x&amp;#39;,
                     titleTextStyle: {color: &amp;#39;#000000&amp;#39;}}&amp;quot;,
                     vAxis=&amp;quot;{title: &amp;#39;Response y&amp;#39;,
                     titleTextStyle: {color: &amp;#39;#000000&amp;#39;}}&amp;quot;,
                     title=&amp;quot;Curvilinear Relationship&amp;quot;,
                     width=550, height=500,
                     legend=&amp;quot;none&amp;quot;),
                   chartid=&amp;quot;ZoomZoom&amp;quot;)

print(gvScat,&amp;#39;chart&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The same approach works in any R Markdown document (including the source document for this Jekyll-powered post). I will certainly take a closer look at &lt;code&gt;googleVis&lt;/code&gt;: thanks, Markus!&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
