<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  

  <link rel="icon" type="image/png" href="/favicon.png">

  <title>
    
    
     Hosting on your Github User Page via Submodule 
    
  </title>
  <link rel="canonical" href="/post/hosting-on-your-github-user-page-via-submodule/">

  <link rel="stylesheet" href="/css/fonts.css" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/custom.css" />

  
</head>

<body>
<section id=nav>
  <h1><a href="/">Homer&#39;s Academic Blog</a></h1>
  <ul>
    
    <li><a href="/">Home</a></li>
    
    <li><a href="/about">About</a></li>
    
    <li><a href="https://github.com/homerhanumat">GitHub</a></li>
    
    <li><a href="/index.xml">RSS</a></li>
    
  </ul>
</section>


<section id=content>
  <h1> Hosting on your Github User Page via Submodule </h1>

  <div id=sub-header>
    Homer White · 2017/05/28 · 2 minute read
  </div>

  <div class="entry-content">
    <p>My primary technical blog is hosted by Github through my User repository (<code>homerhanumat.github.io</code>).  Recently I switched my generator from Jekyll to Hugo.</p>

<p>From the User repository Github Pages requires that the site be served from the root of the repository (not from <code>docs</code>).  Jekyll allowed us to build the site into the root, but Hugo builds into a specific directory, named <code>public</code> by default.  Building into the root would look a bit messy, anyway.</p>

<p>I decided to handle the problem by creating a separate repository for my source code, then making the <code>public</code> directory into a submodule of the source repo, with a remote pointed to my User repo.  The idea is taken from <a href="https://stackoverflow.com/questions/12514197/convert-a-git-folder-to-a-submodule-retrospectively">Stackoverflow</a>.</p>

<p>First make sure you have initialized your project as a git repository.  Go ahead and set the remote to a repo on Github&mdash;or wherever you like, really.</p>

<p>Build your site with Hugo.  You now have a <code>public</code> directory.  Then do the following in the terminal (replacing &ldquo;username&rdquo; with your own Github username):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">cd public
git init
git remote add origin https://github.com/username/username.github.io.git
git add .
touch .nojekyll  <span style="color:#008000"># so Github will not attempt to serve the site with Jekyll
</span><span style="color:#008000"></span>git commit -am <span style="color:#a31515">&#39;first commit in submodule&#39;</span>
git push
cd ..
rm -rf public
git commit -am <span style="color:#a31515">&#39;deleting folder&#39;</span>
git submodule add https://github.com/username/username.github.io.git public
git commit -am <span style="color:#a31515">&#39;adding submodule&#39;</span></code></pre></div>
<p>Now when you commit and push from the root of your project, the changes go to the remote for your source.  When you want to push changes up to the website itself, <code>cd</code> into <code>public</code>, commit changes and push to the <code>username.gihub.io</code> remote.</p>

<p>When Hugo serves your site it modifies files in <code>public</code> but leaves alone files that no longer correspond to anything in your source.  Sometimes you need to remove these files, so it&rsquo;s recommended to make a clean start:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">rm -rf public</code></pre></div>
<p>But you should NOT do this!  You&rsquo;ll lose <code>.git</code> and your submodule along with it.</p>

<p>When you need to remove junk files, it&rsquo;s easiest to remove all files except <code>.nojekyll</code> and the <code>git</code> directory.  This can be accomplished from the terminal as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">shopt -s extglob
cd public
rm -rf !(.nojekyll|.git)
cd ..   # back to the root of the project</code></pre></div>
<p>Now you can serve the site and <code>public</code> will be replenished.</p>

<p>My remote source repo is at:</p>

<blockquote>
<p><a href="https://github.com/homerhanumat/hugoBlog.git">https://github.com/homerhanumat/hugoBlog.git</a></p>
</blockquote>

<p>You can see that the <code>public</code> directory appears as a submodule.  Click on it and you&rsquo;ll come to the User repo:</p>

<blockquote>
<p><a href="https://github.com/homerhanumat/homerhanumat.github.io.git">https://github.com/homerhanumat/homerhanumat.github.io.git</a></p>
</blockquote>

<p>The blog itself is hosted from this latter repo.</p>

  </div>

  <div id=links>
    
      <a class="basic-alignment left" href="/post/2016-03-11-rstudio-addinplots-installation/">&laquo; Installing the Addinplots Package</a>
    
    
      <a class="basic-alignment left" href="/post/blogdown-demo-sites/">Demo Sites for Blogdown-ified Hugo Themes &raquo;</a>
    
  </div>
</section>


<div id="gh-comments-list"></div>

<script>
  var url = "https://github.com/homerhanumat/homerhanumat.github.io/issues/" +  3 
  var api_url = "https://api.github.com/repos/homerhanumat/homerhanumat.github.io/issues/" +  3  + "/comments"
</script>
<script src="/js/jquery-1.12.3.min.js"></script>
<script src="/js/ghcomments.js"></script>

  
  


</body>
</html>

